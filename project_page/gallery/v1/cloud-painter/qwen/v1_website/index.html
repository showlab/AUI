<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Painter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
        }

        body {
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            color: #000;
            background-color: #fff;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
            max-width: 1280px;
        }

        h1 {
            color: #FF6B9D;
            font-size: 3rem;
            text-shadow: 3px 3px 0 #FFD1DC, 6px 6px 0 rgba(0,0,0,0.1);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .subtitle {
            color: #4A90E2;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 1280px;
        }

        .toolbar {
            background: rgba(255, 255, 255, 0.85);
            border-radius: 0;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            width: 100%;
            border: 1px solid #ccc;
        }

        .tool-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .tool-label {
            font-weight: bold;
            color: #5D8AA8;
            font-size: 0.9rem;
        }

        .brush-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .brush-option {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: #f0f0f0;
            border: 2px solid #ccc;
        }

        .brush-option:hover {
            transform: scale(1.1);
            border-color: #FF6B9D;
        }

        .brush-option.active {
            border-color: #FF6B9D;
            box-shadow: 0 0 10px rgba(255, 107, 157, 0.5);
            background: #ffebee;
        }

        .btn {
            background: linear-gradient(to bottom, #FF6B9D, #FF4081);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            min-width: 120px;
            justify-content: center;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .canvas-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            height: 500px;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            border-radius: 0;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 5px solid #FFD1DC;
            margin-bottom: 20px;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: crosshair;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.85);
            border-radius: 15px;
            padding: 15px;
            margin-top: 20px;
            max-width: 1200px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #ccc;
        }

        .instructions h2 {
            color: #5D8AA8;
            margin-bottom: 10px;
        }

        .instructions p {
            color: #5D8AA8;
            line-height: 1.6;
        }

        footer {
            margin-top: 30px;
            text-align: center;
            color: #5D8AA8;
            font-size: 0.9rem;
        }

        /* New additions for improved UI */
        .status-indicator {
            background: #f0f0f0;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            min-height: 20px;
            text-align: center;
            width: 100%;
            max-width: 1200px;
        }

        .control-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .control-label {
            font-weight: bold;
            color: #000;
            font-size: 0.9rem;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            max-width: 300px;
        }

        .slider {
            flex: 1;
            height: 10px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 5px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #FF6B9D;
            cursor: pointer;
        }

        .value-display {
            min-width: 40px;
            text-align: center;
            font-weight: bold;
        }

        .toggle-btn {
            background: #f0f0f0;
            border: 1px solid #ccc;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .toggle-btn.active {
            background: #FF6B9D;
            color: white;
        }

        .count-display {
            font-weight: bold;
            margin: 0 10px;
            min-width: 30px;
            text-align: center;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .toolbar {
                flex-direction: column;
                align-items: center;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .canvas-container {
                height: 400px;
            }
            
            .brush-options {
                gap: 5px;
            }
            
            .brush-option {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1 id="app-title">‚òÅÔ∏è Cloud Painter ‚òÅÔ∏è</h1>
        <p class="subtitle">Draw beautiful clouds and watch them float!</p>
    </header>

    <div class="container">
        <!-- Toolbar with improved brush selection -->
        <div class="toolbar">
            <div class="tool-group">
                <span class="tool-label">Brush Shape</span>
                <div class="brush-options">
                    <div class="brush-option active" data-brush="circle" title="Circle">‚ö™</div>
                    <div class="brush-option" data-brush="square" title="Square">‚¨ú</div>
                    <div class="brush-option" data-brush="star" title="Star">‚≠ê</div>
                    <div class="brush-option" data-brush="heart" title="Heart">‚ù§Ô∏è</div>
                </div>
            </div>
            
            <div class="tool-group">
                <span class="tool-label">Actions</span>
                <button id="clear-btn" class="btn">üßπ Clear Canvas</button>
                <button id="save-btn" class="btn">üíæ Save Image</button>
            </div>
        </div>

        <!-- Additional controls for enhanced functionality -->
        <div class="control-row">
            <div class="control-group">
                <span class="control-label">Wind Speed</span>
                <div class="slider-container">
                    <input type="range" min="0" max="2" step="0.1" value="1" class="slider" id="wind-speed">
                    <span class="value-display" id="wind-value">1.0</span>
                </div>
            </div>
            
            <div class="control-group">
                <span class="control-label">Animation</span>
                <button id="toggle-animation" class="toggle-btn active">‚è∏Ô∏è Pause</button>
            </div>
        </div>

        <div class="canvas-container">
            <canvas id="paint-canvas"></canvas>
        </div>

        <div class="controls">
            <button id="add-plane-btn" class="btn">‚úàÔ∏è Add Plane</button>
            <button id="add-cloud-btn" class="btn">‚òÅÔ∏è Add Cloud</button>
            <button id="add-storm-btn" class="btn">‚õàÔ∏è Add Storm</button>
        </div>

        <div class="status-indicator">
            <span id="status-message">Ready to create beautiful clouds!</span>
            <span id="plane-count">Planes: <span class="count-display" id="planes-count">0</span></span>
            <span id="cloud-count">Clouds: <span class="count-display" id="clouds-count">0</span></span>
        </div>

        <div class="instructions">
            <h2>How to Play</h2>
            <p>Click and drag on the canvas to draw clouds! Choose different brush shapes from the toolbar. Watch your clouds drift across the sky and add airplanes to fly through them! Use the wind speed control to adjust drift speed.</p>
        </div>
    </div>

    <footer>
        <p>Made with ‚ù§Ô∏è for kids | Cloud Painter App</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Canvas setup
            const canvas = document.getElementById('paint-canvas');
            const ctx = canvas.getContext('2d');
            const clearBtn = document.getElementById('clear-btn');
            const saveBtn = document.getElementById('save-btn');
            const addPlaneBtn = document.getElementById('add-plane-btn');
            const addCloudBtn = document.getElementById('add-cloud-btn');
            const addStormBtn = document.getElementById('add-storm-btn');
            const brushOptions = document.querySelectorAll('.brush-option');
            const windSlider = document.getElementById('wind-speed');
            const windValue = document.getElementById('wind-value');
            const toggleAnimationBtn = document.getElementById('toggle-animation');
            const statusMessage = document.getElementById('status-message');
            const planesCount = document.getElementById('planes-count');
            const cloudsCount = document.getElementById('clouds-count');

            // Set canvas dimensions
            function resizeCanvas() {
                const container = canvas.parentElement;
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
                redraw();
            }

            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();

            // State variables
            let isDrawing = false;
            let currentBrush = 'circle';
            let clouds = [];
            let planes = [];
            let lastX = 0;
            let lastY = 0;
            let animationPaused = false;
            let animationId = null;

            // Initialize with some clouds
            function initClouds() {
                clouds = [
                    { x: 100, y: 80, size: 40, speed: 0.5 },
                    { x: 300, y: 120, size: 60, speed: 0.3 },
                    { x: 500, y: 60, size: 50, speed: 0.4 },
                    { x: 700, y: 100, size: 35, speed: 0.6 }
                ];
                
                planes = [
                    { x: 200, y: 200, size: 30, speed: 2, direction: 1 },
                    { x: 800, y: 300, size: 25, speed: 1.5, direction: -1 }
                ];
                
                updateCounts();
            }

            // Brush shapes
            const brushShapes = {
                circle: (x, y, size) => {
                    ctx.beginPath();
                    ctx.arc(x, y, size/2, 0, Math.PI * 2);
                    ctx.fill();
                },
                square: (x, y, size) => {
                    ctx.fillRect(x - size/2, y - size/2, size, size);
                },
                star: (x, y, size) => {
                    const radius = size / 2;
                    ctx.save();
                    ctx.translate(x, y);
                    ctx.beginPath();
                    for (let i = 0; i < 5; i++) {
                        ctx.lineTo(Math.cos(((18 + i * 72) / 180) * Math.PI) * radius,
                                   -Math.sin(((18 + i * 72) / 180) * Math.PI) * radius);
                        ctx.lineTo(Math.cos(((54 + i * 72) / 180) * Math.PI) * radius * 0.5,
                                   -Math.sin(((54 + i * 72) / 180) * Math.PI) * radius * 0.5);
                    }
                    ctx.closePath();
                    ctx.fill();
                    ctx.restore();
                },
                heart: (x, y, size) => {
                    ctx.save();
                    ctx.translate(x, y);
                    ctx.scale(size/40, size/40);
                    ctx.beginPath();
                    ctx.moveTo(0, -10);
                    ctx.bezierCurveTo(0, -15, -5, -20, -10, -20);
                    ctx.bezierCurveTo(-15, -20, -20, -15, -20, -10);
                    ctx.bezierCurveTo(-20, -5, -15, 0, -10, 0);
                    ctx.bezierCurveTo(-5, 0, 0, -5, 0, -10);
                    ctx.closePath();
                    ctx.fill();
                    ctx.restore();
                }
            };

            // Drawing functions
            function startDrawing(e) {
                isDrawing = true;
                [lastX, lastY] = getMousePos(canvas, e);
            }

            function draw(e) {
                if (!isDrawing) return;
                
                const [x, y] = getMousePos(canvas, e);
                const size = 20 + Math.random() * 30;
                
                ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 80%)`;
                brushShapes[currentBrush](x, y, size);
                
                lastX = x;
                lastY = y;
            }

            function stopDrawing() {
                isDrawing = false;
            }

            function getMousePos(canvas, evt) {
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                
                return [
                    (evt.clientX - rect.left) * scaleX,
                    (evt.clientY - rect.top) * scaleY
                ];
            }

            // Animation loop
            function animate() {
                if (animationPaused) {
                    animationId = requestAnimationFrame(animate);
                    return;
                }
                
                // Clear canvas with a semi-transparent overlay for trail effect
                ctx.fillStyle = 'rgba(135, 206, 235, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw clouds
                clouds.forEach(cloud => {
                    drawCloud(cloud.x, cloud.y, cloud.size);
                    cloud.x += cloud.speed * parseFloat(windSlider.value);
                    if (cloud.x > canvas.width + 100) {
                        cloud.x = -100;
                    }
                });
                
                // Draw planes
                planes.forEach(plane => {
                    drawPlane(plane.x, plane.y, plane.size, plane.direction);
                    plane.x += plane.speed * plane.direction * parseFloat(windSlider.value);
                    if (plane.x > canvas.width + 50 || plane.x < -50) {
                        plane.direction *= -1;
                    }
                });
                
                animationId = requestAnimationFrame(animate);
            }

            // Cloud drawing function
            function drawCloud(x, y, size) {
                ctx.fillStyle = '#FFFFFF';
                ctx.shadowColor = 'rgba(0,0,0,0.2)';
                ctx.shadowBlur = 5;
                ctx.shadowOffsetX = 2;
                ctx.shadowOffsetY = 2;
                
                // Draw cloud parts
                ctx.beginPath();
                ctx.arc(x, y, size/2, 0, Math.PI * 2);
                ctx.arc(x + size/3, y - size/6, size/3, 0, Math.PI * 2);
                ctx.arc(x + size/2, y, size/2.5, 0, Math.PI * 2);
                ctx.arc(x + size/3, y + size/6, size/3, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.shadowBlur = 0;
                ctx.shadowOffsetX = 0;
                ctx.shadowOffsetY = 0;
            }

            // Plane drawing function
            function drawPlane(x, y, size, direction) {
                ctx.fillStyle = '#FF6B9D';
                ctx.strokeStyle = '#FF4081';
                ctx.lineWidth = 2;
                
                ctx.save();
                ctx.translate(x, y);
                ctx.scale(direction, 1);
                
                // Draw plane body
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(-size/2, -size/4);
                ctx.lineTo(-size/2, size/4);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                
                // Draw wings
                ctx.beginPath();
                ctx.moveTo(-size/3, 0);
                ctx.lineTo(-size/2, -size/2);
                ctx.lineTo(-size/4, 0);
                ctx.lineTo(-size/2, size/2);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                
                // Draw tail
                ctx.beginPath();
                ctx.moveTo(-size/2, 0);
                ctx.lineTo(-size, -size/3);
                ctx.lineTo(-size, size/3);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                
                ctx.restore();
            }

            // Redraw everything
            function redraw() {
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw background gradient
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#87CEEB');
                gradient.addColorStop(1, '#E0F7FA');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Redraw clouds
                clouds.forEach(cloud => {
                    drawCloud(cloud.x, cloud.y, cloud.size);
                });
                
                // Redraw planes
                planes.forEach(plane => {
                    drawPlane(plane.x, plane.y, plane.size, plane.direction);
                });
            }

            // Update counts display
            function updateCounts() {
                planesCount.textContent = planes.length;
                cloudsCount.textContent = clouds.length;
            }

            // Event listeners
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            // Touch events for mobile
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent('mousedown', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            });

            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent('mousemove', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            });

            canvas.addEventListener('touchend', (e) => {
                e.preventDefault();
                const mouseEvent = new MouseEvent('mouseup', {});
                canvas.dispatchEvent(mouseEvent);
            });

            // Brush selection
            brushOptions.forEach(option => {
                option.addEventListener('click', () => {
                    brushOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    currentBrush = option.dataset.brush;
                    statusMessage.textContent = `Brush selected: ${option.dataset.brush}`;
                });
            });

            // Clear canvas
            clearBtn.addEventListener('click', () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                clouds = [];
                planes = [];
                updateCounts();
                statusMessage.textContent = "Canvas cleared";
            });

            // Save image
            saveBtn.addEventListener('click', () => {
                const link = document.createElement('a');
                link.download = 'cloud-painting.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
                statusMessage.textContent = "Image saved successfully!";
            });

            // Add airplane
            addPlaneBtn.addEventListener('click', () => {
                planes.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height / 2,
                    size: 20 + Math.random() * 20,
                    speed: 1 + Math.random() * 2,
                    direction: Math.random() > 0.5 ? 1 : -1
                });
                updateCounts();
                statusMessage.textContent = "Airplane added to the sky";
            });

            // Add cloud
            addCloudBtn.addEventListener('click', () => {
                clouds.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height / 2,
                    size: 30 + Math.random() * 50,
                    speed: 0.2 + Math.random() * 0.5
                });
                updateCounts();
                statusMessage.textContent = "Cloud added to the sky";
            });

            // Add storm
            addStormBtn.addEventListener('click', () => {
                // Add multiple clouds to create a storm effect
                for (let i = 0; i < 5; i++) {
                    clouds.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height / 2,
                        size: 30 + Math.random() * 50,
                        speed: 0.5 + Math.random() * 1.0
                    });
                }
                updateCounts();
                statusMessage.textContent = "Storm created with multiple clouds!";
            });

            // Wind speed control
            windSlider.addEventListener('input', () => {
                windValue.textContent = windSlider.value;
                statusMessage.textContent = `Wind speed set to ${windSlider.value}`;
            });

            // Animation toggle
            toggleAnimationBtn.addEventListener('click', () => {
                animationPaused = !animationPaused;
                toggleAnimationBtn.textContent = animationPaused ? '‚ñ∂Ô∏è Resume' : '‚è∏Ô∏è Pause';
                toggleAnimationBtn.classList.toggle('active', !animationPaused);
                statusMessage.textContent = animationPaused ? "Animation paused" : "Animation resumed";
            });

            // Initialize
            initClouds();
            redraw();
            animate();
        });
    </script>
</body>
</html>