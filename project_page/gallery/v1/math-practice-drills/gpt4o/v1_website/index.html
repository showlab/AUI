<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Math Practice Drills</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background-color: #ffffff;
      color: #000000;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    .container {
      width: 100%;
      max-width: 800px;
      padding: 1rem;
      box-sizing: border-box;
    }

    .settings, .quiz, .results {
      text-align: center;
      margin-bottom: 1rem;
    }

    label {
      font-size: 1.2rem;
    }

    select, button, input {
      font-size: 1.2rem;
      padding: 0.5rem;
      margin: 0.5rem;
      width: auto;
      box-sizing: border-box;
    }

    button {
      background-color: #000000;
      color: #ffffff;
      border: 1px solid #000000;
      cursor: pointer;
      padding: 0.5rem 1rem;
    }

    button:hover {
      background-color: #ffffff;
      color: #000000;
    }

    .quiz {
      display: none;
    }

    .results {
      display: none;
    }

    .score {
      font-size: 1.5rem;
      margin-top: 1rem;
    }

    .error {
      color: red;
      font-size: 1rem;
      margin-top: 0.5rem;
    }

    .history {
      text-align: left;
      margin-top: 1rem;
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid #000000;
      padding: 1rem;
    }

    .history-item {
      margin-bottom: 0.5rem;
    }

    @media (max-width: 720px) {
      h1 {
        font-size: 2rem;
      }

      label, select, button, input {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Math Practice Drills</h1>

    <div class="settings" id="settings">
      <label for="difficulty">Select Difficulty:</label>
      <select id="difficulty">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
      </select>
      <br>
      <button id="startQuiz">Start Quiz</button>
    </div>

    <div class="quiz" id="quiz">
      <p id="question" class="question">What is 1 + 1?</p>
      <input type="number" id="answer" placeholder="Your answer">
      <br>
      <button id="submitAnswer">Submit</button>
      <p id="timer" class="timer">Time left: 30s</p>
      <p id="errorMessage" class="error"></p>
    </div>

    <div class="results" id="results">
      <p id="finalScore" class="score">Your score: 0</p>
      <button id="restartQuiz">Restart</button>
    </div>

    <div class="history" id="history">
      <h2>Quiz History</h2>
      <div id="historyList"></div>
      <button id="clearHistory">Clear History</button>
    </div>
  </div>

  <script>
    const settingsDiv = document.getElementById('settings');
    const quizDiv = document.getElementById('quiz');
    const resultsDiv = document.getElementById('results');
    const questionEl = document.getElementById('question');
    const answerInput = document.getElementById('answer');
    const timerEl = document.getElementById('timer');
    const finalScoreEl = document.getElementById('finalScore');
    const errorMessage = document.getElementById('errorMessage');
    const historyList = document.getElementById('historyList');
    const historyDiv = document.getElementById('history');

    const startQuizButton = document.getElementById('startQuiz');
    const submitAnswerButton = document.getElementById('submitAnswer');
    const restartQuizButton = document.getElementById('restartQuiz');
    const clearHistoryButton = document.getElementById('clearHistory');

    let difficulty = 'easy';
    let timeLeft = 30;
    let score = 0;
    let currentQuestion = {};
    let timerInterval = null;
    let history = [];

    const difficulties = {
      easy: { maxNum: 10, operations: ['+'] },
      medium: { maxNum: 20, operations: ['+', '-'] },
      hard: { maxNum: 50, operations: ['+', '-', '*'] }
    };

    document.getElementById('difficulty').addEventListener('change', (e) => {
      difficulty = e.target.value;
    });

    function startQuiz() {
      score = 0;
      timeLeft = 30;
      settingsDiv.style.display = 'none';
      quizDiv.style.display = 'block';
      resultsDiv.style.display = 'none';
      errorMessage.textContent = '';
      generateQuestion();
      startTimer();
    }

    function generateQuestion() {
      const { maxNum, operations } = difficulties[difficulty];
      const num1 = Math.floor(Math.random() * maxNum) + 1;
      const num2 = Math.floor(Math.random() * maxNum) + 1;
      const operation = operations[Math.floor(Math.random() * operations.length)];

      currentQuestion = {
        num1,
        num2,
        operation,
        answer: eval(`${num1} ${operation} ${num2}`)
      };

      questionEl.textContent = `What is ${num1} ${operation} ${num2}?`;
      answerInput.value = '';
      answerInput.focus();
    }

    function startTimer() {
      timerEl.textContent = `Time left: ${timeLeft}s`;
      timerInterval = setInterval(() => {
        timeLeft--;
        timerEl.textContent = `Time left: ${timeLeft}s`;
        if (timeLeft <= 0) {
          endQuiz();
        }
      }, 1000);
    }

    function submitAnswer() {
      const userAnswer = answerInput.value.trim();
      if (userAnswer === '') {
        errorMessage.textContent = 'Answer cannot be blank.';
        return;
      }
      const parsedAnswer = parseInt(userAnswer, 10);
      if (isNaN(parsedAnswer)) {
        errorMessage.textContent = 'Answer must be a valid number.';
        return;
      }
      errorMessage.textContent = '';
      if (parsedAnswer === currentQuestion.answer) {
        score++;
      }
      generateQuestion();
    }

    function endQuiz() {
      clearInterval(timerInterval);
      quizDiv.style.display = 'none';
      resultsDiv.style.display = 'block';
      finalScoreEl.textContent = `Your score: ${score}`;
      addHistory();
    }

    function restartQuiz() {
      settingsDiv.style.display = 'block';
      quizDiv.style.display = 'none';
      resultsDiv.style.display = 'none';
    }

    function addHistory() {
      const timestamp = new Date().toLocaleString();
      const historyItem = `Score: ${score}, Difficulty: ${difficulty}, Time: ${timestamp}`;
      history.push(historyItem);
      updateHistoryUI();
    }

    function updateHistoryUI() {
      historyList.innerHTML = '';
      history.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'history-item';
        div.textContent = `${index + 1}. ${item}`;
        historyList.appendChild(div);
      });
    }

    function clearHistory() {
      history = [];
      updateHistoryUI();
    }

    startQuizButton.addEventListener('click', startQuiz);
    submitAnswerButton.addEventListener('click', submitAnswer);
    restartQuizButton.addEventListener('click', restartQuiz);
    clearHistoryButton.addEventListener('click', clearHistory);
  </script>
</body>
</html>