<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Poll Board</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background: #ffffff;
            color: #000000;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: #ffffff;
            border: 1px solid #000000;
            overflow: hidden;
        }

        header {
            background: #000000;
            color: #ffffff;
            padding: 20px;
            text-align: center;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.8;
        }

        .controls {
            padding: 15px;
            background: #f0f0f0;
            border-bottom: 1px solid #000000;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-group {
            flex: 1;
            min-width: 200px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .control-group input, .control-group select, .control-group button {
            width: 100%;
            padding: 8px;
            border: 1px solid #000000;
            margin-bottom: 10px;
        }

        .polls-container {
            padding: 20px;
        }

        .poll-card {
            background: #ffffff;
            border: 1px solid #000000;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
        }

        .poll-question {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .options-container {
            margin-bottom: 15px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            border: 1px solid #cccccc;
        }

        .option:hover {
            background: #f0f0f0;
        }

        .option input {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .option label {
            flex-grow: 1;
            cursor: pointer;
        }

        .vote-btn {
            background: #000000;
            color: #ffffff;
            border: none;
            padding: 10px 15px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        .vote-btn:hover {
            background: #333333;
        }

        .vote-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .results-container {
            margin-top: 15px;
            padding: 10px;
            background: #f8f8f8;
            border-top: 1px solid #000000;
        }

        .result-bar {
            height: 20px;
            background: #cccccc;
            border-radius: 0;
            margin-bottom: 10px;
            overflow: hidden;
            position: relative;
        }

        .result-fill {
            height: 100%;
            background: #000000;
            border-radius: 0;
            position: relative;
        }

        .result-text {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-weight: normal;
        }

        .result-percentage {
            font-weight: bold;
        }

        .total-votes {
            text-align: center;
            padding: 10px;
            font-weight: bold;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 8px;
            border: 1px solid #000000;
            background: #f0f0f0;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .action-btn:hover {
            background: #e0e0e0;
        }

        .edit-form {
            display: none;
            padding: 15px;
            background: #f8f8f8;
            border-top: 1px solid #000000;
            margin-top: 15px;
        }

        .edit-form.active {
            display: block;
        }

        .edit-form input, .edit-form textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #000000;
        }

        .edit-form .form-actions {
            display: flex;
            gap: 10px;
        }

        .edit-form .form-actions button {
            flex: 1;
            padding: 8px;
            border: 1px solid #000000;
            background: #f0f0f0;
            cursor: pointer;
        }

        .edit-form .form-actions button:first-child {
            background: #000000;
            color: #ffffff;
        }

        .edit-form .form-actions button:last-child {
            background: #f0f0f0;
            color: #000000;
        }

        .status-message {
            padding: 10px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }

        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .poll-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }

        .poll-action-btn {
            padding: 5px 8px;
            border: 1px solid #000000;
            background: #f0f0f0;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .poll-action-btn:hover {
            background: #e0e0e0;
        }

        footer {
            text-align: center;
            padding: 15px;
            color: #666666;
            font-size: 0.9rem;
            border-top: 1px solid #000000;
        }

        @media (max-width: 600px) {
            .controls {
                flex-direction: column;
            }
            
            .poll-card {
                padding: 10px;
            }
            
            .poll-question {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Online Poll Board</h1>
            <p class="subtitle">Share your opinion and see what others think</p>
        </header>
        
        <div class="controls">
            <div class="control-group">
                <label for="newPollTitle">New Poll Title:</label>
                <input type="text" id="newPollTitle" placeholder="Enter poll title">
            </div>
            
            <div class="control-group">
                <label for="newPollOptions">Options (comma separated):</label>
                <input type="text" id="newPollOptions" placeholder="Option 1, Option 2, Option 3">
            </div>
            
            <div class="control-group">
                <button id="createPollBtn">Create Poll</button>
            </div>
        </div>
        
        <main class="polls-container" id="pollsContainer">
            <!-- Polls will be dynamically inserted here -->
        </main>
        
        <div id="statusMessage" class="status-message"></div>
        
        <footer>
            <p>Â© 2023 Online Poll Board | Vote responsibly</p>
        </footer>
    </div>

    <script>
        // Sample poll data
        let polls = [
            {
                id: "poll1",
                question: "What is your favorite programming language?",
                options: [
                    { id: "opt1", text: "JavaScript", votes: 45 },
                    { id: "opt2", text: "Python", votes: 38 },
                    { id: "opt3", text: "Java", votes: 22 },
                    { id: "opt4", text: "C++", votes: 15 }
                ],
                pinned: false
            },
            {
                id: "poll2",
                question: "Which technology do you want to learn next?",
                options: [
                    { id: "opt5", text: "React", votes: 52 },
                    { id: "opt6", text: "Vue.js", votes: 28 },
                    { id: "opt7", text: "Angular", votes: 18 },
                    { id: "opt8", text: "Node.js", votes: 35 }
                ],
                pinned: false
            },
            {
                id: "poll3",
                question: "What's your preferred development environment?",
                options: [
                    { id: "opt9", text: "Visual Studio Code", votes: 68 },
                    { id: "opt10", text: "IntelliJ IDEA", votes: 25 },
                    { id: "opt11", text: "Sublime Text", votes: 12 },
                    { id: "opt12", text: "Vim", votes: 10 }
                ],
                pinned: false
            }
        ];

        // DOM elements
        const pollsContainer = document.getElementById('pollsContainer');
        const createPollBtn = document.getElementById('createPollBtn');
        const newPollTitle = document.getElementById('newPollTitle');
        const newPollOptions = document.getElementById('newPollOptions');
        const statusMessage = document.getElementById('statusMessage');

        // Function to show status message
        function showStatus(message, isError = false) {
            statusMessage.textContent = message;
            statusMessage.className = 'status-message ' + (isError ? 'error' : 'success');
            setTimeout(() => {
                statusMessage.textContent = '';
                statusMessage.className = 'status-message';
            }, 5000);
        }

        // Function to render polls
        function renderPolls() {
            pollsContainer.innerHTML = '';
            
            // Sort polls - pinned first
            const sortedPolls = [...polls].sort((a, b) => {
                if (a.pinned && !b.pinned) return -1;
                if (!a.pinned && b.pinned) return 1;
                return 0;
            });
            
            sortedPolls.forEach(poll => {
                const pollElement = document.createElement('div');
                pollElement.className = 'poll-card';
                pollElement.id = `poll-${poll.id}`;
                
                // Add pin/unpin button
                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'poll-actions';
                actionsDiv.innerHTML = `
                    <button class="poll-action-btn" onclick="togglePin('${poll.id}')">
                        ${poll.pinned ? 'Unpin' : 'Pin'}
                    </button>
                    <button class="poll-action-btn" onclick="editPoll('${poll.id}')">Edit</button>
                    <button class="poll-action-btn" onclick="deletePoll('${poll.id}')">Delete</button>
                `;
                pollElement.appendChild(actionsDiv);
                
                let optionsHTML = '';
                let totalVotes = poll.options.reduce((sum, option) => sum + option.votes, 0);
                
                poll.options.forEach(option => {
                    optionsHTML += `
                        <div class="option">
                            <input type="radio" name="poll-${poll.id}" id="${option.id}" value="${option.id}">
                            <label for="${option.id}">${option.text}</label>
                        </div>
                    `;
                });
                
                pollElement.innerHTML += `
                    <h2 class="poll-question">${poll.question}</h2>
                    <div class="options-container">
                        ${optionsHTML}
                    </div>
                    <button class="vote-btn" id="vote-${poll.id}">Vote Now</button>
                    <div class="results-container" id="results-${poll.id}" style="display: none;">
                        <div class="total-votes">Total Votes: ${totalVotes}</div>
                        ${poll.options.map(option => `
                            <div class="result-text">
                                <span>${option.text}</span>
                                <span class="result-percentage">${Math.round((option.votes / Math.max(totalVotes, 1)) * 100)}%</span>
                            </div>
                            <div class="result-bar">
                                <div class="result-fill" id="fill-${option.id}" style="width: 0;"></div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                // Add edit form
                const editForm = document.createElement('div');
                editForm.className = 'edit-form';
                editForm.id = `edit-form-${poll.id}`;
                editForm.innerHTML = `
                    <h3>Edit Poll</h3>
                    <input type="text" id="edit-title-${poll.id}" value="${poll.question}">
                    <textarea id="edit-options-${poll.id}">${poll.options.map(o => o.text).join(', ')}</textarea>
                    <div class="form-actions">
                        <button onclick="saveEdit('${poll.id}')">Save Changes</button>
                        <button onclick="cancelEdit('${poll.id}')">Cancel</button>
                    </div>
                `;
                pollElement.appendChild(editForm);
                
                pollsContainer.appendChild(pollElement);
                
                // Add event listener for vote button
                const voteButton = document.getElementById(`vote-${poll.id}`);
                voteButton.addEventListener('click', () => handleVote(poll));
            });
        }

        // Function to handle voting
        function handleVote(poll) {
            const selectedOption = document.querySelector(`input[name="poll-${poll.id}"]:checked`);
            
            if (!selectedOption) {
                showStatus('Please select an option before voting!', true);
                return;
            }
            
            // Get the selected option ID
            const selectedOptionId = selectedOption.value;
            
            // Find the selected option in our data
            const option = poll.options.find(opt => opt.id === selectedOptionId);
            
            // Update vote count (simulating server update)
            option.votes++;
            
            // Show results
            const resultsContainer = document.getElementById(`results-${poll.id}`);
            resultsContainer.style.display = 'block';
            
            // Animate the vote
            const voteButton = document.getElementById(`vote-${poll.id}`);
            voteButton.disabled = true;
            voteButton.textContent = 'Voted!';
            
            // Animate result bars
            animateResultBars(poll);
            
            // Reset after delay
            setTimeout(() => {
                voteButton.disabled = false;
                voteButton.textContent = 'Vote Now';
            }, 2000);
        }

        // Function to animate result bars
        function animateResultBars(poll) {
            const totalVotes = poll.options.reduce((sum, option) => sum + option.votes, 0);
            
            poll.options.forEach(option => {
                const percentage = Math.round((option.votes / Math.max(totalVotes, 1)) * 100);
                const fillElement = document.getElementById(`fill-${option.id}`);
                
                // Animate the bar
                fillElement.style.width = '0';
                setTimeout(() => {
                    fillElement.style.width = `${percentage}%`;
                }, 100);
            });
        }

        // Function to create a new poll
        function createPoll() {
            const title = newPollTitle.value.trim();
            const optionsText = newPollOptions.value.trim();
            
            if (!title) {
                showStatus('Please enter a poll title', true);
                return;
            }
            
            if (!optionsText) {
                showStatus('Please enter at least one option', true);
                return;
            }
            
            // Split options by comma and clean up
            const options = optionsText.split(',').map(opt => opt.trim()).filter(opt => opt);
            
            if (options.length < 2) {
                showStatus('Please enter at least two options', true);
                return;
            }
            
            // Create new poll
            const newId = `poll${Date.now()}`;
            const newPoll = {
                id: newId,
                question: title,
                options: options.map((opt, index) => ({
                    id: `opt${Date.now()}-${index}`,
                    text: opt,
                    votes: 0
                })),
                pinned: false
            };
            
            polls.push(newPoll);
            renderPolls();
            
            // Clear form
            newPollTitle.value = '';
            newPollOptions.value = '';
            
            showStatus('Poll created successfully!');
        }

        // Function to toggle pin status
        function togglePin(pollId) {
            const poll = polls.find(p => p.id === pollId);
            if (poll) {
                poll.pinned = !poll.pinned;
                renderPolls();
            }
        }

        // Function to edit poll
        function editPoll(pollId) {
            const form = document.getElementById(`edit-form-${pollId}`);
            form.classList.add('active');
        }

        // Function to cancel edit
        function cancelEdit(pollId) {
            const form = document.getElementById(`edit-form-${pollId}`);
            form.classList.remove('active');
        }

        // Function to save edit
        function saveEdit(pollId) {
            const poll = polls.find(p => p.id === pollId);
            if (!poll) return;
            
            const newTitle = document.getElementById(`edit-title-${pollId}`).value.trim();
            const newOptionsText = document.getElementById(`edit-options-${pollId}`).value.trim();
            
            if (!newTitle) {
                showStatus('Please enter a poll title', true);
                return;
            }
            
            if (!newOptionsText) {
                showStatus('Please enter at least one option', true);
                return;
            }
            
            // Split options by comma and clean up
            const newOptions = newOptionsText.split(',').map(opt => opt.trim()).filter(opt => opt);
            
            if (newOptions.length < 2) {
                showStatus('Please enter at least two options', true);
                return;
            }
            
            // Update poll
            poll.question = newTitle;
            poll.options = newOptions.map((opt, index) => ({
                id: `opt${Date.now()}-${index}`,
                text: opt,
                votes: poll.options[index] ? poll.options[index].votes : 0
            }));
            
            renderPolls();
            showStatus('Poll updated successfully!');
        }

        // Function to delete poll
        function deletePoll(pollId) {
            if (confirm('Are you sure you want to delete this poll?')) {
                polls = polls.filter(p => p.id !== pollId);
                renderPolls();
                showStatus('Poll deleted successfully!');
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            renderPolls();
            
            // Add event listener for create poll button
            createPollBtn.addEventListener('click', createPoll);
            
            // Allow Enter key to create poll
            newPollTitle.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') createPoll();
            });
            
            newPollOptions.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') createPoll();
            });
        });
    </script>
</body>
</html>