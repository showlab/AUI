<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <title>Customer Case Study - XYZ Corp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="Customer Case Study - XYZ Corp: How a SaaS platform delivered measurable outcomes with a clear problem/solution breakdown, metrics, and a testimonial." />
  <style>
    :root{
      --bg: #0f1221;
      --surface: #171a2e;
      --elev: #1e2340;
      --text: #e7ebff;
      --muted: #aab3d1;
      --brand: #6aa7ff;
      --brand-2: #8df2d1;
      --accent: #ffce6a;
      --danger: #ff6a8a;
      --ok: #5cd59a;
      --border: rgba(255,255,255,0.12);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 14px;
      --radius-sm: 10px;
      --radius-lg: 22px;
      --focus: 0 0 0 3px rgba(106,167,255,0.45), 0 0 0 6px rgba(106,167,255,0.16);
    }
    body[data-theme="light"]{
      --bg: #f7f8fd;
      --surface: #ffffff;
      --elev: #f3f6ff;
      --text: #0e1330;
      --muted: #46507a;
      --brand: #275efe;
      --brand-2: #11bfae;
      --accent: #ff8a1e;
      --danger: #e03b5a;
      --ok: #0eab6d;
      --border: rgba(0,0,0,0.10);
      --shadow: 0 10px 30px rgba(16,25,56,0.15);
    }

    html, body{height:100%;}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
      color: var(--text);
      background: radial-gradient(1200px 700px at 20% -20%, rgba(106,167,255,0.12), transparent 60%),
                  radial-gradient(800px 500px at 100% 0%, rgba(141,242,209,0.10), transparent 60%),
                  var(--bg);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .container{
      width: min(1120px, 92vw);
      margin: 0 auto;
    }
    .skip-link{
      position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
    }
    .skip-link:focus{
      left: 16px; top: 16px; width:auto; height:auto; padding:10px 14px; background: var(--brand); color:white; border-radius: 8px; z-index:10000;
      box-shadow: var(--focus);
    }

    /* Header */
    header{
      position: sticky; top:0; z-index:999;
      backdrop-filter: saturate(140%) blur(12px);
      background: color-mix(in oklab, var(--bg) 86%, transparent);
      border-bottom: 1px solid var(--border);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding: 14px 0;
    }
    .brand{
      display:flex; align-items:center; gap:12px; text-decoration:none; color:var(--text);
    }
    .brand-logo{
      width:36px; height:36px; border-radius: 10px;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      display:grid; place-items:center; color:white; font-weight:800; letter-spacing: -0.5px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    }
    .brand h1{
      font-size: 18px; margin:0; letter-spacing: 0.2px;
    }
    .nav-actions{display:flex; gap:10px; align-items:center;}
    .btn, button{
      font: inherit;
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, color-mix(in oklab, var(--surface) 92%, transparent), var(--surface));
      padding:10px 14px; border-radius: 12px; cursor:pointer;
      transition: transform .05s ease, border-color .2s ease, background .2s ease, color .2s ease;
    }
    .btn:hover{transform: translateY(-1px); border-color: color-mix(in oklab, var(--brand) 40%, var(--border));}
    .btn:active{transform: translateY(0);}
    .btn-primary{
      background: linear-gradient(180deg, color-mix(in oklab, var(--brand) 26%, var(--surface)), color-mix(in oklab, var(--brand) 15%, var(--surface)));
      border-color: color-mix(in oklab, var(--brand) 40%, var(--border));
      color: white;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.12), 0 6px 18px rgba(39,94,254,0.25);
    }
    .btn-ghost{
      background: transparent; border-color: var(--border);
    }
    .icon{
      width:18px; height:18px; display:inline-block;
    }
    .toggle{
      display:inline-flex; align-items:center; gap:10px; padding: 8px 10px; border-radius: 999px;
      border:1px solid var(--border); cursor:pointer; user-select:none;
      background: linear-gradient(180deg, color-mix(in oklab, var(--surface) 90%, transparent), var(--surface));
    }
    .toggle .dot{
      width:18px; height:18px; border-radius:999px; background: var(--brand-2);
      box-shadow: 0 2px 8px rgba(0,0,0,0.22);
      transition: transform .25s ease;
    }
    [data-theme="light"] .toggle .dot{ transform: translateX(18px); background: var(--brand);}

    /* Progress bar */
    #scrollProgress{
      position: fixed; top:0; left:0; width:100%; height:4px; background: transparent; z-index: 1000;
    }
    #scrollProgressInner{
      width:0%; height:100%; background: linear-gradient(90deg, var(--brand), var(--brand-2));
      transition: width .12s ease-out;
    }

    /* Hero */
    .hero{
      padding: 40px 0 24px;
    }
    .hero-grid{
      display:grid; grid-template-columns: 1.25fr 1fr; gap: 22px; align-items: center;
    }
    .eyebrow{
      display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border-radius: 999px;
      background: color-mix(in oklab, var(--brand) 12%, transparent);
      color: color-mix(in oklab, var(--brand) 86%, var(--text));
      border: 1px solid color-mix(in oklab, var(--brand) 30%, var(--border));
      font-weight: 600; font-size: 12px; letter-spacing: 0.3px;
    }
    .headline{
      font-size: clamp(28px, 3.2vw, 42px); line-height: 1.1; margin: 12px 0;
    }
    .subhead{
      color: var(--muted); margin: 0 0 18px;
    }
    .badges{display:flex; gap:10px; flex-wrap: wrap;}
    .badge{
      font-size: 12px; padding: 6px 10px; border-radius: 999px; background: var(--elev); border:1px solid var(--border); color: var(--muted);
    }
    .hero-card{
      background: linear-gradient(180deg, color-mix(in oklab, var(--elev) 80%, transparent), var(--elev));
      border:1px solid var(--border); border-radius: var(--radius-lg); padding: 18px; box-shadow: var(--shadow);
    }
    .hero-card h3{margin: 0 0 8px;}
    .key-row{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:6px 0;}
    .key-row strong{font-size: 20px;}

    /* Metrics */
    .metrics{padding: 8px 0 22px;}
    .metric-grid{
      display:grid; grid-template-columns: repeat(3,1fr); gap: 16px;
    }
    .metric-card{
      background: linear-gradient(180deg, color-mix(in oklab, var(--surface) 90%, transparent), var(--surface));
      border:1px solid var(--border); border-radius: var(--radius); padding: 18px; position: relative; overflow: hidden;
      transition: transform .15s ease, border-color .2s ease;
    }
    .metric-card:hover{transform: translateY(-2px); border-color: color-mix(in oklab, var(--brand) 28%, var(--border));}
    .metric-head{display:flex; align-items:center; justify-content:space-between; gap:8px;}
    .metric-title{color: var(--muted); font-size: 12px; letter-spacing: 0.3px;}
    .metric-value{font-weight: 800; font-size: 36px; margin: 6px 0 2px; letter-spacing: -0.6px;}
    .metric-foot{display:flex; align-items:center; gap:10px; color: var(--muted); font-size: 12px;}
    .info-btn{
      border:1px solid var(--border); background: transparent; color: var(--muted); padding:6px 8px; border-radius: 10px; cursor:pointer;
    }
    .info-panel{
      margin-top:10px; padding: 10px; border-radius: 10px; background: color-mix(in oklab, var(--elev) 86%, transparent); border:1px dashed var(--border); color: var(--muted);
    }

    /* Tabs */
    .tabs{
      margin: 18px 0 12px; border:1px solid var(--border); border-radius: var(--radius); background: var(--surface);
    }
    .tablist{
      display:flex; gap:8px; padding: 8px; border-bottom:1px solid var(--border); overflow:auto;
    }
    .tab-btn{
      border: 1px solid var(--border); background: var(--elev); color: var(--muted);
      padding: 10px 14px; border-radius: 12px; cursor:pointer; flex: 0 0 auto;
    }
    .tab-btn[aria-selected="true"]{
      color: white; background: linear-gradient(180deg, color-mix(in oklab, var(--brand) 24%, var(--elev)), var(--elev));
      border-color: color-mix(in oklab, var(--brand) 40%, var(--border));
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.08), 0 8px 16px rgba(39,94,254,0.18);
    }
    .tab-panels{padding: 14px;}
    .panel{
      display:none;
    }
    .panel.active{display:block;}
    .panel h3{margin-top:0;}

    /* Testimonial and aside */
    .split{
      display:grid; grid-template-columns: 1.6fr .9fr; gap: 16px; align-items: start;
    }
    .testimonial{
      background: linear-gradient(180deg, color-mix(in oklab, var(--elev) 88%, transparent), var(--elev));
      border:1px solid var(--border); border-radius: var(--radius-lg); padding: 18px; position: relative;
      box-shadow: var(--shadow);
    }
    .testimonial .row{display:flex; align-items:center; justify-content:space-between; gap:12px;}
    .stars{color: var(--accent); letter-spacing: 1px;}
    blockquote{
      margin: 12px 0; font-size: 18px; line-height: 1.4;
    }
    figure{display:flex; align-items:center; gap:10px; margin:0; color: var(--muted);}
    .avatar{
      width:36px; height:36px; border-radius: 999px; background: linear-gradient(135deg, var(--brand-2), var(--brand)); display:grid; place-items:center; color:white; font-weight:700;
    }

    aside.calculator{
      background: linear-gradient(180deg, color-mix(in oklab, var(--surface) 92%, transparent), var(--surface));
      border:1px solid var(--border); border-radius: var(--radius); padding: 16px;
      position: sticky; top: 86px;
    }
    .calc-row{margin: 10px 0;}
    input[type="range"]{width:100%;}
    .kpi{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding: 10px; border-radius: 10px; background: var(--elev); border:1px solid var(--border);
      margin-top: 8px;
    }

    /* CTA */
    .cta{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
      background: linear-gradient(120deg, color-mix(in oklab, var(--brand) 18%, var(--surface)), color-mix(in oklab, var(--brand-2) 12%, var(--surface)));
      border:1px solid var(--border); border-radius: var(--radius-lg); padding: 16px; margin: 20px 0 26px;
    }

    /* Footer */
    footer{
      color: var(--muted); padding: 24px 0 40px; border-top:1px solid var(--border);
    }
    .foot-actions{display:flex; gap:10px; flex-wrap: wrap;}

    /* Utils */
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0;}
    .muted{color: var(--muted);}
    .ok{color: var(--ok);}
    .danger{color: var(--danger);}

    /* Responsive */
    @media (max-width: 980px){
      .hero-grid, .split { grid-template-columns: 1fr; }
      aside.calculator{ position: relative; top: 0; }
    }
  </style>
</head>
<body>
  <a href="#main" class="skip-link">Skip to main content</a>

  <div id="scrollProgress" aria-hidden="true"><div id="scrollProgressInner"></div></div>

  <header>
    <div class="container nav">
      <a href="#" class="brand" aria-label="XYZ Corp case study home">
        <div class="brand-logo" aria-hidden="true">X</div>
        <h1>Customer Case Study ‚Äî XYZ Corp</h1>
      </a>
      <div class="nav-actions">
        <div class="toggle" id="toggleTheme" role="switch" aria-checked="false" tabindex="0" title="Toggle light/dark theme">
          <span aria-hidden="true">üåô</span>
          <div class="dot"></div>
          <span aria-hidden="true">‚òÄÔ∏è</span>
        </div>
        <button id="btnOpenModal" class="btn btn-primary">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M8 12l2.5 2.5L16 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Talk to sales
        </button>
      </div>
    </div>
  </header>

  <main id="main" class="container" role="main">
    <section class="hero" aria-labelledby="hero-title">
      <div class="hero-grid">
        <div>
          <span class="eyebrow">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 12h16M12 4v16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            SaaS Client Success
          </span>
          <h2 id="hero-title" class="headline">XYZ Corp cut onboarding time, boosted expansion revenue, and achieved 3.5x ROI in 6 months</h2>
          <p class="subhead">Using our unified customer lifecycle platform, XYZ Corp replaced manual playbooks and siloed data with automated, data-driven workflows.</p>
          <div class="badges" aria-label="Quick facts">
            <span class="badge">Industry: B2B Fintech</span>
            <span class="badge">Company size: 800+</span>
            <span class="badge">Deployment: 6 weeks</span>
          </div>
        </div>
        <div class="hero-card" aria-labelledby="key-outcomes">
          <h3 id="key-outcomes">Key outcomes at a glance</h3>
          <div class="key-row">
            <span class="muted">Onboarding cycle</span>
            <strong class="ok">-47%</strong>
          </div>
          <div class="key-row">
            <span class="muted">Expansion revenue</span>
            <strong class="ok">+28%</strong>
          </div>
          <div class="key-row">
            <span class="muted">ROI in 6 months</span>
            <strong class="ok">3.5√ó</strong>
          </div>
          <div class="key-row">
            <span class="muted">CSAT</span>
            <strong class="ok">+19 pts</strong>
          </div>
        </div>
      </div>
    </section>

    <section class="metrics" aria-labelledby="metrics-title">
      <h3 id="metrics-title" class="sr-only">Impact metrics</h3>
      <div class="metric-grid">
        <article class="metric-card" aria-labelledby="metric1-title">
          <div class="metric-head">
            <span id="metric1-title" class="metric-title">Faster Onboarding</span>
            <button id="metricInfoBtn1" class="info-btn" aria-expanded="false" aria-controls="metricMore1">Methodology</button>
          </div>
          <div id="metric1" class="metric-value" data-target="47" data-suffix="%" aria-live="polite">0%</div>
          <div class="metric-foot">
            <span class="muted">Cycle time reduced</span>
          </div>
          <div id="metricMore1" class="info-panel" hidden>
            Based on average onboarding cycle reduced from 17 to 9 days across 260 cohorts over 6 months.
          </div>
        </article>

        <article class="metric-card" aria-labelledby="metric2-title">
          <div class="metric-head">
            <span id="metric2-title" class="metric-title">Expansion Revenue</span>
            <button id="metricInfoBtn2" class="info-btn" aria-expanded="false" aria-controls="metricMore2">Methodology</button>
          </div>
          <div id="metric2" class="metric-value" data-target="28" data-suffix="%" aria-live="polite">0%</div>
          <div class="metric-foot">
            <span class="muted">Net expansion increase</span>
          </div>
          <div id="metricMore2" class="info-panel" hidden>
            Measured via NRR uplift comparing pre- and post-implementation quarters (seasonally adjusted).
          </div>
        </article>

        <article class="metric-card" aria-labelledby="metric3-title">
          <div class="metric-head">
            <span id="metric3-title" class="metric-title">Return on Investment</span>
            <button id="metricInfoBtn3" class="info-btn" aria-expanded="false" aria-controls="metricMore3">Methodology</button>
          </div>
          <div id="metric3" class="metric-value" data-target="3.5" data-suffix="√ó" aria-live="polite">0√ó</div>
          <div class="metric-foot">
            <span class="muted">Within first 6 months</span>
          </div>
          <div id="metricMore3" class="info-panel" hidden>
            ROI = (incremental margin + cost savings) / platform cost; validated by finance.
          </div>
        </article>
      </div>
    </section>

    <section aria-labelledby="breakdown-title">
      <h3 id="breakdown-title" class="sr-only">Problem / Solution breakdown</h3>
      <div class="tabs" id="psTabs">
        <div class="tablist" id="tablist" role="tablist" aria-label="Case breakdown tabs">
          <button id="tab-problem" class="tab-btn" role="tab" aria-selected="true" aria-controls="panel-problem" tabindex="0">Problem</button>
          <button id="tab-solution" class="tab-btn" role="tab" aria-selected="false" aria-controls="panel-solution" tabindex="-1">Solution</button>
          <button id="tab-rollout" class="tab-btn" role="tab" aria-selected="false" aria-controls="panel-rollout" tabindex="-1">Rollout</button>
        </div>
        <div class="tab-panels">
          <article id="panel-problem" class="panel active" role="tabpanel" aria-labelledby="tab-problem">
            <h3>The challenge at XYZ Corp</h3>
            <ul>
              <li>Siloed product usage and CRM data led to reactive playbooks.</li>
              <li>Manual onboarding checklists extended cycle time and increased drop-off.</li>
              <li>Inconsistent health scores made forecasting expansions difficult.</li>
              <li>Time-consuming QBR prep (8+ hours per account) strained the CS team.</li>
            </ul>
          </article>
          <article id="panel-solution" class="panel" role="tabpanel" aria-labelledby="tab-solution" hidden>
            <h3>The solution we implemented</h3>
            <ul>
              <li>Unified data model blending product, billing, and support signals in real-time.</li>
              <li>Automated onboarding journeys with milestone alerts and customer-facing status.</li>
              <li>Predictive health scoring to prioritize risk and upsell readiness.</li>
              <li>Auto-generated QBR decks with live metrics and one-click exports.</li>
            </ul>
          </article>
          <article id="panel-rollout" class="panel" role="tabpanel" aria-labelledby="tab-rollout" hidden>
            <h3>Rollout and change management</h3>
            <ol>
              <li>Week 1‚Äì2: Integrations and data validation; pilot with two CS pods.</li>
              <li>Week 3‚Äì4: Playbook automation and stakeholder training.</li>
              <li>Week 5‚Äì6: Organization-wide go-live and executive dashboards.</li>
            </ol>
            <p class="muted">Change was supported with office hours, playbook templates, and in-app guides.</p>
          </article>
        </div>
      </div>
    </section>

    <section class="split" aria-labelledby="testimonial-title">
      <article class="testimonial" aria-describedby="quoteText">
        <div class="row">
          <h3 id="testimonial-title" style="margin:0;">What XYZ Corp says</h3>
          <div class="stars" aria-label="5 out of 5 stars" title="5 out of 5 stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        </div>
        <blockquote id="quoteText">‚ÄúWe shaved days off onboarding, our CS team finally operates proactively, and revenue followed. The platform paid for itself in a quarter.‚Äù</blockquote>
        <figure>
          <div class="avatar" aria-hidden="true">A</div>
          <figcaption>
            <strong>Ava Patel</strong>, VP of Operations, XYZ Corp <span class="muted">‚Ä¢ Verified</span>
          </figcaption>
        </figure>
        <div style="display:flex; gap:10px; margin-top:12px;">
          <button id="btnCopyQuote" class="btn btn-ghost">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 9h9v11H9z" stroke="currentColor" stroke-width="2"/><path d="M6 15H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1" stroke="currentColor" stroke-width="2"/></svg>
            Copy quote
          </button>
          <button id="btnSpeakQuote" class="btn">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 9v6h4l5 5V4L8 9H4z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M19 5a7 7 0 010 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            Play audio
          </button>
        </div>
      </article>

      <aside class="calculator" aria-labelledby="calc-title">
        <h3 id="calc-title" style="margin:0 0 8px;">Quick ROI estimator</h3>
        <p class="muted">Estimate monthly savings from faster onboarding. Adjust inputs to match your scenario.</p>
        <div class="calc-row">
          <label for="roiAccounts" class="muted">Monthly new accounts</label>
          <input id="roiAccounts" type="range" min="5" max="250" value="60" />
          <div class="kpi"><span>Accounts</span><strong id="roiAccountsVal">60</strong></div>
        </div>
        <div class="calc-row">
          <label for="roiHours" class="muted">Hours saved per account</label>
          <input id="roiHours" type="range" min="1" max="10" value="4" />
          <div class="kpi"><span>Hours</span><strong id="roiHoursVal">4</strong></div>
        </div>
        <div class="calc-row">
          <label for="roiRate" class="muted">Fully-loaded hourly rate (USD)</label>
          <input id="roiRate" type="range" min="25" max="200" value="80" step="5" />
          <div class="kpi"><span>$/hour</span><strong id="roiRateVal">$80</strong></div>
        </div>
        <div class="kpi">
          <span>Estimated monthly savings</span>
          <strong id="roiOutputSavings">$19,200</strong>
        </div>
        <div class="kpi">
          <span>Estimated ROI (vs $2,000/mo)</span>
          <strong id="roiOutputRoi">9.6√ó</strong>
        </div>
        <p class="muted" style="font-size:12px;">Estimates only. Actual ROI varies by mix, margins, and volume.</p>
      </aside>
    </section>

    <section class="cta" aria-label="Call to action">
      <div>
        <strong>Want the full case study deck?</strong>
        <p class="muted" style="margin:4px 0 0;">Get a copy with playbooks, dashboards, and lessons learned.</p>
      </div>
      <div style="display:flex; gap:10px; flex-wrap: wrap;">
        <button id="btnOpenModal2" class="btn btn-primary">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          Request deck
        </button>
        <button id="btnPrintPage" class="btn btn-ghost" title="Print or save as PDF">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 9V4h12v5" stroke="currentColor" stroke-width="2"/><rect x="6" y="14" width="12" height="6" rx="1" stroke="currentColor" stroke-width="2"/><path d="M18 13h1a2 2 0 1 0 0-4H5a2 2 0 1 0 0 4h1" stroke="currentColor" stroke-width="2"/></svg>
          Print / Save PDF
        </button>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="foot-actions">
        <button id="btnShareLink" class="btn btn-ghost">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 12v7a1 1 0 0 0 1 1h7M20 12V5a1 1 0 0 0-1-1h-7" stroke="currentColor" stroke-width="2"/><path d="M20 4L10 14M14 4h6v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          Copy shareable link
        </button>
        <button id="btnBackToTop" class="btn btn-ghost">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 19V5M5 12l7-7 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Back to top
        </button>
      </div>
      <p style="margin-top:12px;" class="muted">¬© <span id="yearNow"></span> Case Study ‚Äî XYZ Corp. All rights reserved.</p>
    </div>
  </footer>

  <!-- Modal -->
  <div id="contactModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" hidden>
    <div id="modalOverlay" style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(3px);"></div>
    <div style="position: fixed; inset: 0; display:grid; place-items:center; padding: 20px;">
      <div style="width:min(560px, 96vw); background: var(--surface); border:1px solid var(--border); border-radius: 16px; box-shadow: var(--shadow);">
        <div style="display:flex; justify-content:space-between; align-items:center; padding:14px 16px; border-bottom:1px solid var(--border);">
          <h3 id="modalTitle" style="margin:0;">Request the full case study</h3>
          <button id="btnCloseModal" class="btn btn-ghost" aria-label="Close dialog">‚úï</button>
        </div>
        <form id="contactForm" style="padding: 16px;">
          <div style="display:grid; gap:12px;">
            <label>Full name
              <input id="inputName" type="text" required placeholder="Your name" style="width:100%; padding:10px 12px; border-radius: 10px; border:1px solid var(--border); background: var(--elev); color: var(--text);" />
            </label>
            <label>Email
              <input id="inputEmail" type="email" required placeholder="you@company.com" style="width:100%; padding:10px 12px; border-radius: 10px; border:1px solid var(--border); background: var(--elev); color: var(--text);" />
            </label>
            <label>Use case (optional)
              <textarea id="inputMsg" rows="3" placeholder="Tell us about your goals" style="width:100%; padding:10px 12px; border-radius: 10px; border:1px solid var(--border); background: var(--elev); color: var(--text);"></textarea>
            </label>
            <div style="display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap: wrap;">
              <div class="muted" style="font-size:12px;">We‚Äôll get back within one business day.</div>
              <button id="btnSubmitForm" class="btn btn-primary" type="submit">
                <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 12l6 6L20 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                Send request
              </button>
            </div>
            <div id="formStatus" class="muted" role="status" aria-live="polite"></div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Theme toggle
    (function(){
      const body = document.body;
      const key = 'theme-pref';
      const toggle = document.getElementById('toggleTheme');
      const saved = localStorage.getItem(key);
      if(saved){ body.setAttribute('data-theme', saved); if(saved === 'light'){ toggle.setAttribute('aria-checked','true'); } }
      function switchTheme(){
        const current = body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
        body.setAttribute('data-theme', current);
        toggle.setAttribute('aria-checked', current === 'light');
        localStorage.setItem(key, current);
      }
      toggle.addEventListener('click', switchTheme);
      toggle.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); switchTheme(); }});
    })();

    // Scroll progress
    (function(){
      const bar = document.getElementById('scrollProgressInner');
      function update(){
        const doc = document.documentElement;
        const total = doc.scrollHeight - doc.clientHeight;
        const pct = total > 0 ? (doc.scrollTop / total) * 100 : 0;
        bar.style.width = pct + '%';
      }
      document.addEventListener('scroll', update, {passive:true});
      window.addEventListener('resize', update);
      update();
    })();

    // Metrics animation
    (function(){
      const metrics = Array.from(document.querySelectorAll('.metric-value'));
      let done = new WeakSet();
      function animate(el){
        if(done.has(el)) return;
        done.add(el);
        const target = parseFloat(el.dataset.target);
        const suffix = el.dataset.suffix || '';
        const isFloat = String(target).includes('.');
        const duration = 1400;
        const start = performance.now();
        function frame(now){
          const t = Math.min(1, (now - start) / duration);
          const ease = 1 - Math.pow(1 - t, 3);
          const value = target * ease;
          el.textContent = (isFloat ? value.toFixed(1) : Math.round(value)) + suffix;
          if(t < 1) requestAnimationFrame(frame);
          else el.textContent = (isFloat ? target.toFixed(1) : Math.round(target)) + suffix;
        }
        requestAnimationFrame(frame);
      }
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{ if(e.isIntersecting) animate(e.target); });
      }, {threshold: 0.4});
      metrics.forEach(m => io.observe(m));
    })();

    // Metric info toggles
    (function(){
      const pairs = [
        ['metricInfoBtn1','metricMore1'],
        ['metricInfoBtn2','metricMore2'],
        ['metricInfoBtn3','metricMore3']
      ];
      pairs.forEach(([btnId,panelId])=>{
        const btn = document.getElementById(btnId);
        const panel = document.getElementById(panelId);
        btn.addEventListener('click', ()=>{
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
          panel.hidden = expanded;
        });
      });
    })();

    // Tabs with keyboard navigation
    (function(){
      const tabs = Array.from(document.querySelectorAll('.tab-btn'));
      const panels = {
        'tab-problem': document.getElementById('panel-problem'),
        'tab-solution': document.getElementById('panel-solution'),
        'tab-rollout': document.getElementById('panel-rollout')
      };
      function activate(id){
        tabs.forEach(t=>{
          const selected = t.id === id;
          t.setAttribute('aria-selected', selected);
          t.tabIndex = selected ? 0 : -1;
          const panel = panels[t.id];
          if(panel){
            panel.classList.toggle('active', selected);
            panel.hidden = !selected;
          }
        });
        document.getElementById(id).focus();
      }
      tabs.forEach((tab, idx)=>{
        tab.addEventListener('click', ()=> activate(tab.id));
        tab.addEventListener('keydown', (e)=>{
          const i = tabs.indexOf(tab);
          if(e.key === 'ArrowRight'){ e.preventDefault(); activate(tabs[(i+1)%tabs.length].id); }
          if(e.key === 'ArrowLeft'){ e.preventDefault(); activate(tabs[(i-1+tabs.length)%tabs.length].id); }
          if(e.key === 'Home'){ e.preventDefault(); activate(tabs[0].id); }
          if(e.key === 'End'){ e.preventDefault(); activate(tabs[tabs.length-1].id); }
        });
      });
    })();

    // Testimonial copy + speech
    (function(){
      const btnCopy = document.getElementById('btnCopyQuote');
      const btnSpeak = document.getElementById('btnSpeakQuote');
      const quote = document.getElementById('quoteText');

      btnCopy.addEventListener('click', async ()=>{
        const text = quote.textContent.replace(/[‚Äú‚Äù]/g,'"');
        try{
          if(navigator.clipboard && navigator.clipboard.writeText){
            await navigator.clipboard.writeText(text);
          }else{
            const ta = document.createElement('textarea');
            ta.value = text; document.body.appendChild(ta); ta.select();
            document.execCommand('copy'); document.body.removeChild(ta);
          }
          btnCopy.textContent = 'Copied!';
          setTimeout(()=> btnCopy.innerHTML = '<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 9h9v11H9z" stroke="currentColor" stroke-width="2"/><path d="M6 15H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1" stroke="currentColor" stroke-width="2"/></svg>Copy quote', 1600);
        }catch(e){
          btnCopy.textContent = 'Copy failed';
          setTimeout(()=> btnCopy.innerHTML = '<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 9h9v11H9z" stroke="currentColor" stroke-width="2"/><path d="M6 15H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1" stroke="currentColor" stroke-width="2"/></svg>Copy quote', 1600);
        }
      });

      let utterance = null;
      function stopSpeech(){
        if(window.speechSynthesis){
          window.speechSynthesis.cancel();
        }
        utterance = null;
        btnSpeak.innerHTML = '<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 9v6h4l5 5V4L8 9H4z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M19 5a7 7 0 010 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>Play audio';
      }
      btnSpeak.addEventListener('click', ()=>{
        if(!('speechSynthesis' in window)){ btnSpeak.textContent='Audio not supported'; return; }
        if(window.speechSynthesis.speaking){ stopSpeech(); return; }
        utterance = new SpeechSynthesisUtterance(quote.textContent);
        utterance.rate = 1.02; utterance.pitch = 1;
        utterance.onend = stopSpeech;
        btnSpeak.innerHTML = '<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>Stop audio';
        window.speechSynthesis.speak(utterance);
      });
    })();

    // ROI calculator
    (function(){
      const $ = id => document.getElementById(id);
      const accounts = $('roiAccounts');
      const hours = $('roiHours');
      const rate = $('roiRate');
      const vAccounts = $('roiAccountsVal');
      const vHours = $('roiHoursVal');
      const vRate = $('roiRateVal');
      const outSavings = $('roiOutputSavings');
      const outRoi = $('roiOutputRoi');
      const formatMoney = n => '$' + n.toLocaleString(undefined, {maximumFractionDigits:0});
      const formatX = n => n.toLocaleString(undefined, {maximumFractionDigits:1}) + '√ó';
      function recalc(){
        const a = +accounts.value, h = +hours.value, r = +rate.value;
        vAccounts.textContent = a;
        vHours.textContent = h;
        vRate.textContent = '$' + r;
        const savings = a * h * r; // monthly estimate
        outSavings.textContent = formatMoney(savings);
        const cost = 2000;
        outRoi.textContent = formatX(savings / cost);
      }
      [accounts, hours, rate].forEach(i=> i.addEventListener('input', recalc));
      recalc();
    })();

    // CTA actions
    (function(){
      const btnPrint = document.getElementById('btnPrintPage');
      btnPrint.addEventListener('click', ()=> window.print());

      const btnShare = document.getElementById('btnShareLink');
      btnShare.addEventListener('click', async ()=>{
        const url = location.href;
        try{
          if(navigator.share){
            await navigator.share({title: document.title, text: 'Customer Case Study ‚Äî XYZ Corp', url});
          }else if(navigator.clipboard){
            await navigator.clipboard.writeText(url);
            btnShare.textContent = 'Link copied!';
            setTimeout(()=> btnShare.innerHTML = '<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 12v7a1 1 0 0 0 1 1h7M20 12V5a1 1 0 0 0-1-1h-7" stroke="currentColor" stroke-width="2"/><path d="M20 4L10 14M14 4h6v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>Copy shareable link', 1400);
          }
        }catch(e){ /* ignore */ }
      });

      const topBtn = document.getElementById('btnBackToTop');
      topBtn.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

      document.getElementById('yearNow').textContent = new Date().getFullYear();
    })();

    // Modal handling with focus trap
    (function(){
      const modal = document.getElementById('contactModal');
      const overlay = document.getElementById('modalOverlay');
      const form = document.getElementById('contactForm');
      const btnOpen1 = document.getElementById('btnOpenModal');
      const btnOpen2 = document.getElementById('btnOpenModal2');
      const btnClose = document.getElementById('btnCloseModal');
      const formStatus = document.getElementById('formStatus');
      let lastFocused = null;

      function focusables(scope){
        return Array.from(scope.querySelectorAll('button, [href], input, textarea, select, [tabindex]:not([tabindex="-1"])'))
          .filter(el => !el.hasAttribute('disabled') && !el.getAttribute('aria-hidden'));
      }

      function open(){
        lastFocused = document.activeElement;
        modal.hidden = false;
        document.body.style.overflow = 'hidden';
        const f = focusables(modal); if(f.length){ f[0].focus(); }
        document.addEventListener('keydown', trap);
      }
      function close(){
        modal.hidden = true;
        document.body.style.overflow = '';
        document.removeEventListener('keydown', trap);
        if(lastFocused) lastFocused.focus();
      }
      function trap(e){
        if(e.key === 'Escape'){ e.preventDefault(); close(); }
        if(e.key === 'Tab'){
          const f = focusables(modal); if(!f.length) return;
          const first = f[0], last = f[f.length-1];
          if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
          else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
        }
      }
      btnOpen1.addEventListener('click', open);
      btnOpen2.addEventListener('click', open);
      btnClose.addEventListener('click', close);
      overlay.addEventListener('click', close);

      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        const name = document.getElementById('inputName').value.trim();
        const email = document.getElementById('inputEmail').value.trim();
        const msg = document.getElementById('inputMsg').value.trim();
        if(!name || !email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
          formStatus.innerHTML = '<span class="danger">Please provide a valid name and email.</span>';
          return;
        }
        // Simulate submission
        formStatus.textContent = 'Sending...';
        setTimeout(()=>{
          formStatus.innerHTML = '<span class="ok">Thanks, ' + name.split(' ')[0] + '! We‚Äôll email the deck shortly.</span>';
          try{
            const payload = {name, email, msg, ts: Date.now()};
            localStorage.setItem('last-request', JSON.stringify(payload));
          }catch(e){}
          form.reset();
        }, 800);
      });
    })();
  </script>
</body>
</html>