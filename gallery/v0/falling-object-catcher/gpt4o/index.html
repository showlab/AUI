<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Falling Fruits Game</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f0f8ff;
      overflow: hidden;
    }

    #game-container {
      position: relative;
      width: 100%;
      height: 100vh;
      background: linear-gradient(to bottom, #87ceeb, #f0f8ff);
      overflow: hidden;
    }

    #basket {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 50px;
      background-color: #ff6347;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    .fruit {
      position: absolute;
      width: 50px;
      height: 50px;
      background-color: #ffcc00;
      border-radius: 50%;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 24px;
      color: #333;
      font-weight: bold;
    }

    #game-over {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 36px;
      color: #ff4500;
      font-weight: bold;
      text-align: center;
      display: none;
    }

    #game-over button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      background-color: #ff6347;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #game-over button:hover {
      background-color: #ff4500;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <div id="score">Score: 0</div>
    <div id="basket"></div>
    <div id="game-over">
      <p>Game Over!</p>
      <button id="restart-button">Restart</button>
    </div>
  </div>

  <script>
    const gameContainer = document.getElementById('game-container');
    const basket = document.getElementById('basket');
    const scoreDisplay = document.getElementById('score');
    const gameOverDisplay = document.getElementById('game-over');
    const restartButton = document.getElementById('restart-button');

    let score = 0;
    let missed = 0;
    let gameInterval;
    let fruits = [];

    // Basket movement
    let basketX = gameContainer.offsetWidth / 2 - basket.offsetWidth / 2;
    const basketSpeed = 20;

    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') {
        basketX = Math.max(0, basketX - basketSpeed);
      } else if (e.key === 'ArrowRight') {
        basketX = Math.min(gameContainer.offsetWidth - basket.offsetWidth, basketX + basketSpeed);
      }
      basket.style.left = `${basketX}px`;
    });

    gameContainer.addEventListener('mousemove', (e) => {
      const containerRect = gameContainer.getBoundingClientRect();
      basketX = Math.min(
        Math.max(0, e.clientX - containerRect.left - basket.offsetWidth / 2),
        gameContainer.offsetWidth - basket.offsetWidth
      );
      basket.style.left = `${basketX}px`;
    });

    // Create a fruit
    function createFruit() {
      const fruit = document.createElement('div');
      fruit.classList.add('fruit');
      fruit.style.left = `${Math.random() * (gameContainer.offsetWidth - 50)}px`;
      fruit.style.top = '0px';
      gameContainer.appendChild(fruit);
      fruits.push(fruit);
    }

    // Update fruits
    function updateFruits() {
      fruits.forEach((fruit, index) => {
        const fruitY = parseFloat(fruit.style.top);
        fruit.style.top = `${fruitY + 5}px`;

        // Check if fruit is caught
        const fruitRect = fruit.getBoundingClientRect();
        const basketRect = basket.getBoundingClientRect();
        if (
          fruitRect.bottom >= basketRect.top &&
          fruitRect.left < basketRect.right &&
          fruitRect.right > basketRect.left
        ) {
          score++;
          scoreDisplay.textContent = `Score: ${score}`;
          fruit.remove();
          fruits.splice(index, 1);
        }

        // Check if fruit is missed
        if (fruitY > gameContainer.offsetHeight) {
          missed++;
          fruit.remove();
          fruits.splice(index, 1);
          if (missed >= 3) {
            endGame();
          }
        }
      });
    }

    // End game
    function endGame() {
      clearInterval(gameInterval);
      gameOverDisplay.style.display = 'block';
    }

    // Restart game
    restartButton.addEventListener('click', () => {
      score = 0;
      missed = 0;
      scoreDisplay.textContent = `Score: ${score}`;
      gameOverDisplay.style.display = 'none';
      fruits.forEach((fruit) => fruit.remove());
      fruits = [];
      startGame();
    });

    // Start game
    function startGame() {
      basketX = gameContainer.offsetWidth / 2 - basket.offsetWidth / 2;
      basket.style.left = `${basketX}px`;

      gameInterval = setInterval(() => {
        if (Math.random() < 0.05) {
          createFruit();
        }
        updateFruits();
      }, 50);
    }

    // Initialize game
    startGame();
  </script>
</body>
</html>