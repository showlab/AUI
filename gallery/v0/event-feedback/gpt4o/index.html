<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Event Feedback Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
      color: #333;
    }

    header {
      background-color: #007bff;
      color: white;
      padding: 10px 20px;
      text-align: center;
      font-size: 1.5em;
    }

    .container {
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .ai-summary {
      background-color: #f1f1f1;
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 20px;
      position: relative;
      border-radius: 5px;
    }

    .ai-summary button {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #ff4d4d;
      color: white;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 3px;
    }

    .ai-summary button:hover {
      background-color: #e60000;
    }

    .search-bar {
      margin-bottom: 20px;
    }

    .search-bar input {
      width: 100%;
      padding: 10px;
      font-size: 1em;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      padding: 10px;
      text-align: left;
      border: 1px solid #ddd;
    }

    th {
      background-color: #007bff;
      color: white;
      cursor: pointer;
    }

    th.sort-asc::after {
      content: " ▲";
    }

    th.sort-desc::after {
      content: " ▼";
    }

    tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    tr:hover {
      background-color: #f1f1f1;
    }

    @media (max-width: 768px) {
      th, td {
        font-size: 0.9em;
      }

      .ai-summary {
        font-size: 0.9em;
      }
    }
  </style>
</head>
<body>
  <header>Event Feedback Dashboard</header>
  <div class="container">
    <div class="ai-summary" id="ai-summary">
      <button id="close-summary">Close</button>
      <p><strong>AI Summary:</strong> The majority of participants rated the events positively, with constructive feedback emphasizing better time management and more interactive sessions.</p>
    </div>

    <div class="search-bar">
      <input type="text" id="search-bar" placeholder="Search feedback...">
    </div>

    <table id="feedback-table">
      <thead>
        <tr>
          <th data-column="date">Date</th>
          <th data-column="event">Event Name</th>
          <th data-column="participant">Participant Name</th>
          <th data-column="rating">Rating</th>
          <th data-column="feedback">Feedback</th>
        </tr>
      </thead>
      <tbody>
        <!-- Rows will be populated dynamically -->
      </tbody>
    </table>
  </div>

  <script>
    // Generate random dataset
    const sampleData = Array.from({ length: 30 }, (_, i) => ({
      date: new Date(2023, Math.floor(Math.random() * 12), Math.floor(Math.random() * 28) + 1).toISOString().split('T')[0],
      event: `Event ${Math.floor(Math.random() * 10) + 1}`,
      participant: `Participant ${i + 1}`,
      rating: Math.floor(Math.random() * 5) + 1,
      feedback: `This is a sample feedback message for event ${Math.floor(Math.random() * 10) + 1}. It provides detailed insights and suggestions for improvement.`
    }));

    const tableBody = document.querySelector('#feedback-table tbody');
    const searchBar = document.querySelector('#search-bar');
    const aiSummary = document.querySelector('#ai-summary');
    const closeSummaryButton = document.querySelector('#close-summary');
    let currentSortColumn = null;
    let currentSortDirection = 'asc';

    // Populate table
    function populateTable(data) {
      tableBody.innerHTML = '';
      data.forEach(row => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${row.date}</td>
          <td>${row.event}</td>
          <td>${row.participant}</td>
          <td>${row.rating}</td>
          <td>${row.feedback}</td>
        `;
        tableBody.appendChild(tr);
      });
    }

    // Sort table
    function sortTable(column) {
      const direction = currentSortColumn === column && currentSortDirection === 'asc' ? 'desc' : 'asc';
      currentSortColumn = column;
      currentSortDirection = direction;

      sampleData.sort((a, b) => {
        if (a[column] < b[column]) return direction === 'asc' ? -1 : 1;
        if (a[column] > b[column]) return direction === 'asc' ? 1 : -1;
        return 0;
      });

      document.querySelectorAll('th').forEach(th => th.classList.remove('sort-asc', 'sort-desc'));
      document.querySelector(`th[data-column="${column}"]`).classList.add(direction === 'asc' ? 'sort-asc' : 'sort-desc');

      populateTable(sampleData);
    }

    // Filter table
    function filterTable(keyword) {
      const filteredData = sampleData.filter(row =>
        Object.values(row).some(value => value.toString().toLowerCase().includes(keyword.toLowerCase()))
      );
      populateTable(filteredData);
    }

    // Event listeners
    document.querySelectorAll('th').forEach(th => {
      th.addEventListener('click', () => sortTable(th.dataset.column));
    });

    searchBar.addEventListener('input', e => filterTable(e.target.value));

    closeSummaryButton.addEventListener('click', () => {
      aiSummary.style.display = 'none';
    });

    // Initialize table
    populateTable(sampleData);
  </script>
</body>
</html>