<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <title>Color Match — Fast-Paced Stroop Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="A fast-paced color match (Stroop effect) game. Click the button that matches the word's font color, not its meaning, and score as much as you can in 30 seconds." />
  <style>
    :root{
      --bg-start: #0f172a;
      --bg-end: #111827;
      --panel: rgba(255,255,255,0.06);
      --panel-strong: rgba(255,255,255,0.12);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22d3ee;
      --success: #22c55e;
      --danger: #ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 16px;
      --btn-radius: 14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 70% -10%, #1f2937 0%, transparent 60%) no-repeat,
                  linear-gradient(160deg, var(--bg-start), var(--bg-end));
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .container{
      width:min(1100px, 95vw);
      margin-inline:auto;
      padding:24px;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom:16px;
    }
    header h1{
      margin:0;
      font-size: clamp(20px, 2.5vw, 28px);
      letter-spacing:.6px;
      font-weight:800;
      display:flex;
      gap:.5ch;
      align-items:center;
    }
    header h1 .accent{
      color: var(--accent);
      text-shadow: 0 0 12px rgba(34,211,238,0.4);
    }

    /* Top status bar */
    .status-bar{
      display:grid;
      grid-template-columns: 1fr auto auto;
      gap:16px;
      align-items:center;
      margin-bottom:18px;
    }
    .timer-wrap{
      background: var(--panel);
      border: 1px solid var(--panel-strong);
      border-radius: var(--radius);
      padding: 10px 12px;
      box-shadow: var(--shadow);
    }
    .timer-label{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-size: 14px;
      color: var(--muted);
      margin-bottom:8px;
    }
    #timerValue{
      font-variant-numeric: tabular-nums;
      color: var(--text);
      font-weight:700;
      letter-spacing:.5px;
    }
    .progress{
      position:relative;
      height:10px;
      background: rgba(255,255,255,0.08);
      border-radius: 999px;
      overflow:hidden;
    }
    #timeBar{
      position:absolute;
      inset:0 100% 0 0;
      background: linear-gradient(90deg, var(--accent), #34d399);
      box-shadow: 0 0 12px rgba(34,211,238,.4) inset;
      transition: width .1s linear;
    }
    .score-wrap{
      display:flex;
      align-items:center;
      gap:10px;
      background: var(--panel);
      border: 1px solid var(--panel-strong);
      border-radius: var(--radius);
      padding: 10px 14px;
      font-weight:700;
      box-shadow: var(--shadow);
      min-width:140px;
      justify-content:center;
    }
    #scoreValue{
      font-variant-numeric: tabular-nums;
      font-size: 18px;
    }
    .controls{
      display:flex;
      gap:10px;
    }
    .btn{
      -webkit-tap-highlight-color: transparent;
      appearance:none;
      border:none;
      border-radius: 999px;
      padding: 12px 18px;
      font-weight:800;
      letter-spacing:.5px;
      cursor:pointer;
      color:#0b1220;
      background: linear-gradient(180deg, #ffffff, #dfe7ff);
      box-shadow: 0 6px 20px rgba(0,0,0,0.25), 0 1px 0 rgba(255,255,255,0.4) inset;
      transition: transform .08s ease, filter .12s ease, box-shadow .12s ease, opacity .2s ease;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px) scale(.98) }
    .btn:focus-visible{ outline: 3px solid var(--accent); outline-offset:2px }
    .btn.primary{
      background: linear-gradient(180deg, #22d3ee, #0ea5e9);
      color:#03121b;
      text-shadow: 0 1px 0 rgba(255,255,255,.3);
    }
    .btn.ghost{
      background: transparent;
      color: var(--text);
      border:1px solid var(--panel-strong);
      box-shadow: none;
    }
    .btn[disabled]{
      opacity:.6;
      cursor:not-allowed;
      filter:grayscale(.2);
    }

    /* Game panel */
    #gamePanel{
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.04));
      border: 1px solid var(--panel-strong);
      border-radius: var(--radius);
      padding: clamp(14px, 2.2vw, 22px);
      box-shadow: var(--shadow);
    }
    #wordDisplay{
      text-align:center;
      font-weight: 900;
      letter-spacing: 1.4px;
      font-size: clamp(48px, 9vw, 120px);
      line-height:1.1;
      margin: 12px auto 18px;
      filter: drop-shadow(0 10px 24px rgba(0,0,0,.35));
      min-height: 1em;
      user-select:none;
    }
    #hint{
      text-align:center;
      color: var(--muted);
      font-size: 14px;
      margin-top: -6px;
      margin-bottom: 12px;
      user-select:none;
    }

    /* Buttons grid */
    #buttonsContainer{
      display:grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 12px;
      margin-top: 12px;
    }
    @media (max-width: 1024px){
      #buttonsContainer{ grid-template-columns: repeat(4, 1fr) }
    }
    @media (max-width: 720px){
      #buttonsContainer{ grid-template-columns: repeat(3, 1fr) }
    }
    .color-btn{
      height: 64px;
      border-radius: var(--btn-radius);
      border: 1px solid rgba(255,255,255,0.25);
      box-shadow: 0 8px 24px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,.12) inset;
      font-weight: 900;
      letter-spacing:.5px;
      text-shadow: 0 1px 0 rgba(0,0,0,.25);
      transition: transform .08s ease, box-shadow .12s ease, filter .12s ease, opacity .2s ease;
      cursor: pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      user-select:none;
    }
    .color-btn:active{ transform: translateY(1px) scale(.98) }
    .color-btn:focus-visible{ outline: 3px solid #fff; outline-offset: 2px }
    .color-btn[disabled]{ opacity:.5; cursor:not-allowed; filter:saturate(.6) }
    .color-btn.correct{ box-shadow: 0 0 0 3px rgba(34,197,94,.9), 0 8px 24px rgba(0,0,0,.35); }
    .color-btn.wrong{ animation: shake .26s ease }
    @keyframes shake{
      10%, 90% { transform: translateX(-1px) }
      20%, 80% { transform: translateX(2px) }
      30%, 50%, 70% { transform: translateX(-4px) }
      40%, 60% { transform: translateX(4px) }
    }
    .pop{
      animation: pop .18s ease;
    }
    @keyframes pop{
      0%{ transform: scale(.96); filter:brightness(.9) }
      100%{ transform: scale(1); filter:none }
    }

    /* Results modal */
    #resultsModal{
      position: fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 24px;
      backdrop-filter: blur(6px);
      background: rgba(0,0,0,.35);
      z-index: 20;
    }
    #resultsCard{
      width: min(520px, 92vw);
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.05));
      border: 1px solid var(--panel-strong);
      border-radius: 20px;
      padding: 22px;
      text-align:center;
      box-shadow: var(--shadow);
    }
    #finalScore{
      font-size: clamp(26px, 4vw, 36px);
      font-weight:900;
      margin: 6px 0 14px 0;
      letter-spacing: .8px;
    }
    #resultsModal.show{ display:flex }

    footer{
      margin-top: 18px;
      color: var(--muted);
      font-size: 13px;
      text-align:center;
    }
    footer .kbd{
      display:inline-block;
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid rgba(255,255,255,.2);
      background: rgba(255,255,255,.06);
      color: #fff;
      font-weight:700;
      font-size: 12px;
      margin: 0 2px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>
        <span class="accent">Color</span> Match
      </h1>
      <div class="controls">
        <button id="startBtn" class="btn primary" aria-label="Start or restart game">Start</button>
      </div>
    </header>

    <section class="status-bar" aria-label="Game status">
      <div class="timer-wrap" aria-live="polite" aria-atomic="true">
        <div class="timer-label">
          <span>Time</span>
          <span id="timerValue">30</span>
        </div>
        <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="30" aria-valuenow="30" aria-label="Time remaining">
          <div id="timeBar" style="width: 100%"></div>
        </div>
      </div>
      <div class="score-wrap" aria-live="polite" aria-atomic="true">
        Score: <span id="scoreValue">0</span>
      </div>
      <div class="controls">
        <button id="resetBtn" class="btn ghost" aria-label="Reset score and timer">Reset</button>
      </div>
    </section>

    <main id="gamePanel" role="main" aria-label="Color match game">
      <div id="wordDisplay" aria-live="polite" aria-atomic="true">READY?</div>
      <div id="hint">Click the button that matches the WORD'S FONT COLOR (not the word meaning).</div>
      <nav id="buttonsContainer" aria-label="Color choices">
        <!-- Buttons injected by JavaScript -->
      </nav>
    </main>

    <footer>
      Tip: You have 30 seconds. Go fast! You can also use number keys <span class="kbd">1</span> to <span class="kbd">9</span> and <span class="kbd">0</span>, <span class="kbd">-</span>, <span class="kbd">=</span> to pick colors from left to right.
    </footer>
  </div>

  <section id="resultsModal" aria-modal="true" role="dialog" aria-labelledby="resultsTitle">
    <div id="resultsCard">
      <h2 id="resultsTitle">Time’s up!</h2>
      <div id="finalScore">Your score: 0</div>
      <div style="display:flex; gap:10px; justify-content:center; flex-wrap: wrap;">
        <button id="restartBtn" class="btn primary" aria-label="Play again">Play again</button>
        <button id="closeModalBtn" class="btn ghost" aria-label="Close results">Close</button>
      </div>
    </div>
  </section>

  <script>
    (function(){
      const COLORS = [
        { name: 'RED',    value: '#e53935' },
        { name: 'GREEN',  value: '#43a047' },
        { name: 'BLUE',   value: '#1e88e5' },
        { name: 'YELLOW', value: '#fdd835' },
        { name: 'PURPLE', value: '#8e24aa' },
        { name: 'ORANGE', value: '#fb8c00' },
        { name: 'PINK',   value: '#d81b60' },
        { name: 'BROWN',  value: '#6d4c41' },
        { name: 'BLACK',  value: '#000000' },
        { name: 'GRAY',   value: '#757575' },
        { name: 'TEAL',   value: '#00897b' },
        { name: 'CYAN',   value: '#00acc1' }
      ];

      // Map keys 1..= across 12 buttons for quick keyboard input
      const KEY_ORDER = ['1','2','3','4','5','6','7','8','9','0','-','='];

      // Elements
      const startBtn = document.getElementById('startBtn');
      const resetBtn = document.getElementById('resetBtn');
      const restartBtn = document.getElementById('restartBtn');
      const closeModalBtn = document.getElementById('closeModalBtn');

      const timerValue = document.getElementById('timerValue');
      const timeBar = document.getElementById('timeBar');
      const scoreValue = document.getElementById('scoreValue');

      const buttonsContainer = document.getElementById('buttonsContainer');
      const wordDisplay = document.getElementById('wordDisplay');

      const resultsModal = document.getElementById('resultsModal');
      const finalScore = document.getElementById('finalScore');

      // Game state
      let running = false;
      let acceptingInput = false;
      let score = 0;
      const DURATION = 30_000; // ms
      let startTime = 0;
      let endTime = 0;
      let rafId = null;

      let targetColorName = null; // The correct color (by name) to click

      // Utils
      function hexToRgb(hex){
        const s = hex.replace('#','');
        const bigint = parseInt(s,16);
        if(s.length === 6){
          return { r: (bigint>>16)&255, g:(bigint>>8)&255, b: bigint&255 };
        }
        return { r:0,g:0,b:0 };
      }
      function luminance({r,g,b}){
        const a = [r,g,b].map(v=>{
          v/=255;
          return v<=0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055, 2.4);
        });
        return 0.2126*a[0] + 0.7152*a[1] + 0.0722*a[2];
      }
      function getContrastText(hex){
        const rgb = hexToRgb(hex);
        const L = luminance(rgb);
        return L > 0.36 ? '#0b1220' : '#ffffff';
      }
      function pickRandom(arr){ return arr[Math.floor(Math.random()*arr.length)] }

      // Build color buttons with unique IDs
      const colorButtons = [];
      function buildButtons(){
        buttonsContainer.innerHTML = '';
        COLORS.forEach((c, idx)=>{
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.id = `btn-${c.name.toLowerCase()}`;
          btn.className = 'color-btn';
          btn.setAttribute('data-color-name', c.name);
          btn.style.background = c.value;
          btn.style.color = getContrastText(c.value);
          btn.textContent = c.name;
          btn.addEventListener('click', onColorButtonClick);
          btn.disabled = true;
          buttonsContainer.appendChild(btn);
          colorButtons.push(btn);

          // Add title with keyboard hint
          if(idx < KEY_ORDER.length){
            btn.title = `Press ${KEY_ORDER[idx]} — ${c.name}`;
          }
        });
      }

      function setButtonsEnabled(enabled){
        colorButtons.forEach(b => b.disabled = !enabled);
      }

      function updateScore(n){ scoreValue.textContent = n; }

      function updateTimerDisplay(msRemaining){
        const seconds = Math.ceil(msRemaining / 1000);
        timerValue.textContent = Math.max(0, seconds);
        const progress = Math.max(0, Math.min(1, msRemaining / DURATION));
        timeBar.style.width = `${progress*100}%`;
        const ariaNow = Math.round(progress * 30);
        const progressEl = timeBar.parentElement;
        progressEl.setAttribute('aria-valuenow', String(ariaNow));
      }

      function animateWord(){
        wordDisplay.classList.remove('pop');
        // Force reflow to restart animation
        void wordDisplay.offsetWidth;
        wordDisplay.classList.add('pop');
      }

      function nextRound(){
        if(!running) return;
        acceptingInput = true;

        // Choose word text (meaning) and display color (target) with bias to mismatch
        const mismatchBias = 0.7;
        const textColorObj = pickRandom(COLORS);
        let displayColorObj = pickRandom(COLORS);

        if(Math.random() < mismatchBias){
          // Ensure mismatch
          let tries = 0;
          while(displayColorObj.name === textColorObj.name && tries < 5){
            displayColorObj = pickRandom(COLORS);
            tries++;
          }
        }
        // Assign target and render
        targetColorName = displayColorObj.name;
        wordDisplay.textContent = textColorObj.name;
        wordDisplay.style.color = displayColorObj.value;

        animateWord();
      }

      function onColorButtonClick(e){
        if(!running || !acceptingInput) return;
        acceptingInput = false;

        const btn = e.currentTarget;
        const chosen = btn.getAttribute('data-color-name');

        // Visual feedback
        colorButtons.forEach(b => { b.classList.remove('correct','wrong'); });
        if(chosen === targetColorName){
          score += 1;
          updateScore(score);
          btn.classList.add('correct');
        } else {
          btn.classList.add('wrong');
        }

        // Move to next round shortly
        setTimeout(()=>{
          colorButtons.forEach(b => { b.classList.remove('correct','wrong'); });
          nextRound();
        }, 140);
      }

      // Timer using requestAnimationFrame for smooth bar updates
      function startTimer(){
        startTime = performance.now();
        endTime = startTime + DURATION;
        cancelAnimationFrame(rafId);
        const tick = (now)=>{
          if(!running) return;
          const remaining = Math.max(0, endTime - now);
          updateTimerDisplay(remaining);
          if(remaining <= 0){
            endGame();
          } else {
            rafId = requestAnimationFrame(tick);
          }
        };
        rafId = requestAnimationFrame(tick);
      }

      function startGame(){
        score = 0;
        updateScore(0);
        running = true;
        resultsModal.classList.remove('show');

        setButtonsEnabled(true);
        startBtn.textContent = 'Restart';
        updateTimerDisplay(DURATION);

        nextRound();
        startTimer();
      }

      function resetGame(){
        // Reset without starting (idle state)
        score = 0;
        updateScore(0);
        running = false;
        acceptingInput = false;
        cancelAnimationFrame(rafId);
        updateTimerDisplay(DURATION);
        setButtonsEnabled(false);
        wordDisplay.textContent = 'READY?';
        wordDisplay.style.color = '#e5e7eb';
        startBtn.textContent = 'Start';
      }

      function endGame(){
        running = false;
        acceptingInput = false;
        cancelAnimationFrame(rafId);
        setButtonsEnabled(false);
        wordDisplay.style.color = '#e5e7eb';
        finalScore.textContent = `Your score: ${score}`;
        resultsModal.classList.add('show');
      }

      // Keyboard shortcuts
      function onKeyDown(e){
        if(resultsModal.classList.contains('show')){
          if(e.key === 'Enter' || e.key === ' '){
            e.preventDefault();
            startGame();
          }
          return;
        }
        // Start with space/enter
        if((e.key === ' ' || e.key === 'Enter') && !running){
          e.preventDefault();
          startGame();
          return;
        }
        if(!running || !acceptingInput) return;
        const idx = KEY_ORDER.indexOf(e.key);
        if(idx >= 0 && idx < colorButtons.length){
          e.preventDefault();
          colorButtons[idx].click();
        }
      }

      // Wire up controls
      startBtn.addEventListener('click', startGame);
      resetBtn.addEventListener('click', resetGame);
      restartBtn.addEventListener('click', startGame);
      closeModalBtn.addEventListener('click', ()=> resultsModal.classList.remove('show'));
      document.addEventListener('keydown', onKeyDown);

      // Initialize
      buildButtons();
      resetGame();
    })();
  </script>
</body>
</html>